(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Announce"],{"97c7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v(e._s(e.announceInfo.title))])],1),a("el-card",[a("div",{staticClass:"flex_row"},[a("div",{staticClass:"title"},[a("span",[e._v(e._s(e.announceInfo.title))])]),"sup"===e.userRole||"admin"===e.userRole?a("el-button",{staticClass:"edit_button",attrs:{type:"primary"},on:{click:function(t){return e.openEditDialog()}}},[e._v("编辑")]):e._e()],1),a("div",{staticClass:"inscribe"},[a("span",[e._v(" 发布时间: "+e._s(e.formatTime(e.announceInfo.release_time)))]),a("span",[e._v(" 更新时间: "+e._s(e.formatTime(e.announceInfo.last_update_time)))]),a("span",[e._v("发布人: "+e._s(e.announceInfo.author))])]),a("div",[a("mavon-editor",{staticClass:"margin_top_20",attrs:{value:e.announceInfo.contents,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,boxShadow:!1}})],1)]),a("el-dialog",{attrs:{title:"编辑公告",visible:e.editDialogVisible,width:"80%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[e._v("公告名称")])]),a("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入公告的名称",clearable:""},model:{value:e.new_announceInfo.title,callback:function(t){e.$set(e.new_announceInfo,"title",t)},expression:"new_announceInfo.title"}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[e._v("发布时间")])]),a("el-date-picker",{staticClass:"create-form-value-wrap",staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择发布时间"},model:{value:e.new_announceInfo.release_time,callback:function(t){e.$set(e.new_announceInfo,"release_time",t)},expression:"new_announceInfo.release_time"}})],1)],1),a("div",{staticClass:"create-form-row-wrap"},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[e._v("公告详情")])]),a("mavon-editor",{staticClass:"create-form-value-wrap",model:{value:e.new_announceInfo.contents,callback:function(t){e.$set(e.new_announceInfo,"contents",t)},expression:"new_announceInfo.contents"}})],1),a("div",{staticClass:"create-form-button-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("更新公告")])],1)],1)],1)},s=[],i=n("d02e"),o=n("9c40"),c={data:function(){return{userRole:"",id:0,announceInfo:{},new_announceInfo:{},editDialogVisible:!1}},created:function(){this.userRole=window.localStorage.getItem("role"),this.id=this.$route.params.id,this.getAnnounceInfo(this.id)},methods:{formatTime:o["e"],getAnnounceInfo:function(e){var t=this;Object(i["d"])(e).then((function(e){t.announceInfo=e}))["catch"]((function(e){t.$message({message:"查看公告详情失败",type:"error"})}))},openEditDialog:function(){this.new_announceInfo=this.announceInfo,this.editDialogVisible=!0},submitForm:function(){var e=this,t={new_title:this.new_announceInfo.title,new_contents:this.new_announceInfo.contents,new_release_time:this.new_announceInfo.release_time};Object(i["c"])(this.id,t).then((function(t){e.$message({message:"更新公告成功",type:"success"}),e.editDialogVisible=!1,e.getAnnounceInfo(e.id)}))["catch"]((function(){e.$message({message:"更新公告失败",type:"warning"})}))}}},r=c,l=(n("e755"),n("2877")),u=Object(l["a"])(r,a,s,!1,null,null,null);t["default"]=u.exports},d02e:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return r}));var a=n("d354");function s(e){return Object(a["c"])("/announcements",e)}function i(e){return Object(a["a"])("/announcements/".concat(e))}function o(e,t){return Object(a["d"])("/announcements/".concat(e),t)}function c(e){return Object(a["b"])("/announcements",e)}function r(e){return Object(a["b"])("/announcements/".concat(e))}},d772:function(e,t,n){},e755:function(e,t,n){"use strict";n("d772")},eef4:function(e,t,n){e.exports=n.p+"static/img/required_field.dd6993b2.svg"}}]);