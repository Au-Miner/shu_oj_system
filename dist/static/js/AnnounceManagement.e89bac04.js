(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AnnounceManagement"],{bf4d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("公告管理")]),a("el-breadcrumb-item",[t._v("新建公告")])],1),a("el-card",[a("div",{staticClass:"create-form-title"},[t._v("新建公告")]),a("el-divider"),a("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[t._v("公告名称")])]),a("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入公告的名称",clearable:""},model:{value:t.input_title,callback:function(e){t.input_title=e},expression:"input_title"}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[t._v("发布时间")])]),a("el-date-picker",{staticClass:"create-form-value-wrap",staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择发布时间"},model:{value:t.input_release_time,callback:function(e){t.input_release_time=e},expression:"input_release_time"}})],1)],1),a("div",{staticClass:"create-form-row-wrap"},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[t._v("公告详情")])]),a("mavon-editor",{staticClass:"create-form-value-wrap",model:{value:t.input_contents,callback:function(e){t.input_contents=e},expression:"input_contents"}})],1),a("div",{staticClass:"create-form-button-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("新建公告")])],1)],1)],1)},i=[],s=n("d02e"),r={data:function(){return{input_title:"",input_contents:"",input_release_time:""}},methods:{submitForm:function(){var t=this,e={title:this.input_title,author:window.localStorage.getItem("username"),contents:this.input_contents,release_time:this.input_release_time};Object(s["a"])(e).then((function(){t.$message.success("新建公告成功")}))["catch"]((function(){t.$message.warning("新建公告失败")}))}}},c=r,o=n("2877"),l=Object(o["a"])(c,a,i,!1,null,null,null);e["default"]=l.exports},d02e:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return o}));var a=n("d354");function i(t){return Object(a["c"])("/announcements",t)}function s(t){return Object(a["a"])("/announcements/".concat(t))}function r(t,e){return Object(a["d"])("/announcements/".concat(t),e)}function c(t){return Object(a["b"])("/announcements",t)}function o(t){return Object(a["b"])("/announcements/".concat(t))}},e504:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("公告管理")]),a("el-breadcrumb-item",[t._v("公告列表")])],1),a("el-card",[a("el-input",{staticClass:"singleSearchBar",attrs:{placeholder:"请输入想要搜索的公告标题"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getAnnounceList()}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getAnnounceList()}},slot:"append"})],1),a("el-table",{attrs:{data:t.announceList},on:{"row-click":t.jumpToAnnounceDetail}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"450"}}),a("el-table-column",{attrs:{prop:"release_time",formatter:t.formatTime,label:"发布时间",width:"250"}}),a("el-table-column",{attrs:{prop:"author",label:"发布人","min-width":"150"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return n.stopPropagation(),t.openEditDialog(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return n.stopPropagation(),t.deleteAnnounce(e.row.id,e.row.title)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"table_pagination",attrs:{background:"","hide-on-single-page":"","page-size":t.pageSize,"current-page":t.currentPage,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.getAnnounceList}})],1),a("el-dialog",{attrs:{title:"编辑公告",visible:t.editDialogVisible,width:"80%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[t._v("公告名称")])]),a("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入公告的名称",clearable:""},model:{value:t.new_announceInfo.title,callback:function(e){t.$set(t.new_announceInfo,"title",e)},expression:"new_announceInfo.title"}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[t._v("发布时间")])]),a("el-date-picker",{staticClass:"create-form-value-wrap",staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择发布时间"},model:{value:t.new_announceInfo.release_time,callback:function(e){t.$set(t.new_announceInfo,"release_time",e)},expression:"new_announceInfo.release_time"}})],1)],1),a("div",{staticClass:"create-form-row-wrap"},[a("div",{staticClass:"create-form-label-wrap"},[a("img",{staticClass:"required_img",attrs:{src:n("eef4")}}),a("span",{staticClass:"text"},[t._v("公告详情")])]),a("mavon-editor",{staticClass:"create-form-value-wrap",model:{value:t.new_announceInfo.contents,callback:function(e){t.$set(t.new_announceInfo,"contents",e)},expression:"new_announceInfo.contents"}})],1),a("div",{staticClass:"create-form-button-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateAnnounce()}}},[t._v("更新公告")])],1)],1)],1)},i=[],s=n("d02e"),r=n("c1df"),c=n.n(r),o={data:function(){return{searchInput:"",currentPage:1,pageSize:10,total:null,announceList:[],new_announceId:"",new_announceInfo:{},editDialogVisible:!1}},created:function(){this.getAnnounceList()},methods:{formatTime:function(t){return c()(t.release_time).format("YYYY-MM-DD HH:mm:ss")},getAnnounceList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,n={title_filter:this.searchInput,limit:this.pageSize,offset:this.pageSize*(t-1),is_released:!1};Object(s["e"])(n).then((function(n){e.currentPage=t,e.announceList=n.list,e.total=n.total}))["catch"]((function(t){}))},jumpToAnnounceDetail:function(t){this.$router.push({name:"announceDetail",params:{id:t.id}})},openEditDialog:function(t){var e=this;Object(s["d"])(t).then((function(n){e.new_announceInfo=n,e.new_announceId=t,e.editDialogVisible=!0}))["catch"]((function(t){}))},updateAnnounce:function(){var t=this,e={new_title:this.new_announceInfo.title,new_contents:this.new_announceInfo.contents,new_release_time:this.new_announceInfo.release_time};Object(s["c"])(this.new_announceId,e).then((function(e){t.$message({message:"更新公告成功",type:"success"}),t.editDialogVisible=!1,t.getAnnounceList()}))["catch"]((function(){t.$message({message:"更新公告失败",type:"warning"})}))},deleteAnnounce:function(t,e){var n=this;this.$confirm("此操作将永久删除公告 【"+e+"】 , 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(t).then((function(){n.getAnnounceList(n.currentPage),n.$message.success("删除成功")}))["catch"]((function(){n.$message.warning("删除失败")}))}))["catch"]((function(){n.$message.info("已取消删除")}))}}},l=o,u=n("2877"),m=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=m.exports},eef4:function(t,e,n){t.exports=n.p+"static/img/required_field.dd6993b2.svg"}}]);