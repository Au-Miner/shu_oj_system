(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ContestManagement"],{"04b9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("竞赛管理")]),r("el-breadcrumb-item",[t._v("新建竞赛")])],1),r("el-card",[r("div",{staticClass:"create-form-title"},[t._v("新建竞赛")]),r("el-divider"),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("竞赛域名")])]),r("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入竞赛域名"},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}},[r("template",{slot:"prepend"},[t._v("contest_")])],2)],1),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"create-form-label-wrap"},[r("span",{staticClass:"text"},[t._v("比赛结束后能否查看测试数据")])]),r("el-switch",{staticClass:"create-form-value-wrap",staticStyle:{"margin-top":"20px"},model:{value:t.can_view_testcases,callback:function(e){t.can_view_testcases=e},expression:"can_view_testcases"}})],1)],1),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("竞赛名称")])]),r("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入竞赛名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("span",{staticClass:"text"},[t._v("竞赛密码")])]),r("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入竞赛密码(可选填)"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("竞赛类型")])]),r("el-select",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛类型"},model:{value:t.contestType,callback:function(e){t.contestType=e},expression:"contestType"}},t._l(t.contestTypeOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("开始时间")])]),r("el-date-picker",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛开始时间","value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("结束时间")])]),r("el-date-picker",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛结束时间","value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("封榜时间")])]),r("el-date-picker",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛封榜时间","value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.sealTime,callback:function(e){t.sealTime=e},expression:"sealTime"}})],1)],1),r("div",{staticClass:"create-form-row-wrap"},[r("div",{staticClass:"create-form-label-wrap"},[r("span",{staticClass:"text"},[t._v("竞赛说明")])]),r("div",{staticClass:"create-form-value-wrap"},[r("mavon-editor",{model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}})],1)]),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.view_before_start,callback:function(e){t.view_before_start=e},expression:"view_before_start"}}),r("span",{staticClass:"text"},[t._v("比赛开始前能否查看题目")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.register_after_start,callback:function(e){t.register_after_start=e},expression:"register_after_start"}}),r("span",{staticClass:"text"},[t._v("比赛开始后能否报名参加比赛")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.unrate_after_start,callback:function(e){t.unrate_after_start=e},expression:"unrate_after_start"}}),r("span",{staticClass:"text"},[t._v("比赛开始后报名能否参与排名")])],1)])],1),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.view_after_end,callback:function(e){t.view_after_end=e},expression:"view_after_end"}}),r("span",{staticClass:"text"},[t._v("比赛结束后能否查看题目")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.submit_after_end,callback:function(e){t.submit_after_end=e},expression:"submit_after_end"}}),r("span",{staticClass:"text"},[t._v("比赛结束后能否提交")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.public_after_end,callback:function(e){t.public_after_end=e},expression:"public_after_end"}}),r("span",{staticClass:"text"},[t._v("比赛结束后题目是否公开")])],1)])],1),r("div",{staticClass:"create-form-button-wrap"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitContest()}}},[t._v("新建竞赛")])],1)],1)],1)},s=[],i=a("a93b"),n={data:function(){return{region:"",title:"",password:"",contestType:"",introduction:"",startTime:"",endTime:"",sealTime:"",can_view_testcases:!1,register_after_start:!0,unrate_after_start:!0,view_before_start:!1,view_after_end:!0,public_after_end:!1,submit_after_end:!0,contestTypeOptions:[{label:"公开赛",value:"open_contest"},{label:"小组赛",value:"group_contest"}]}},methods:{submitContest:function(){var t=this,e={region:"contest_"+this.region,title:this.title,can_view_testcases:this.can_view_testcases,introduction:this.introduction,self_type:this.contestType,start_time:this.startTime,end_time:this.endTime,seal_time:this.sealTime,password:this.password,settings:{register_after_start:this.register_after_start,unrate_after_start:this.unrate_after_start,view_before_start:this.view_before_start,view_after_end:this.view_after_end,public_after_end:this.public_after_end,submit_after_end:this.submit_after_end}};""!==this.password&&null!==this.password||delete e["password"],Object(i["b"])(e).then((function(){t.$message({message:"新建竞赛成功",type:"success"});var e="contest_"+t.region;t.$router.push({name:"contestDetailList",params:{region:e}})}))["catch"]((function(){t.$message({message:"新建竞赛失败",type:"warning"})}))}}},l=n,o=a("2877"),c=Object(o["a"])(l,r,s,!1,null,null,null);e["default"]=c.exports},"1dde":function(t,e,a){var r=a("d039"),s=a("b622"),i=a("2d00"),n=s("species");t.exports=function(t){return i>=51||!r((function(){var e=[],a=e.constructor={};return a[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4a26":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return n})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"h",(function(){return f}));a("99af");var r=a("d354");function s(t){return Object(r["c"])("/groups",t)}function i(t){return Object(r["a"])("/groups/".concat(t))}function n(t,e){return Object(r["d"])("/groups/".concat(t),e)}function l(t){return Object(r["b"])("/groups",t)}function o(t){return Object(r["b"])("/groups/".concat(t))}function c(t,e){return Object(r["c"])("/groups/".concat(t),e)}function u(t,e){return Object(r["a"])("/groups/".concat(t,"/").concat(e))}function f(t,e){return Object(r["b"])("/groups/".concat(t,"/users"),e)}},"4d40":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{"margin-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("ProblemSearchBar",{attrs:{searchProblemList:t.searchProblemList}})],1),a("el-col",{attrs:{span:2,offset:2}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.addProblemDialogVisible=!0}}},[t._v("添加题目")])],1)],1),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:t.problemList},on:{"row-click":t.jumpToProblemDetail}},[a("el-table-column",{attrs:{prop:"inner_id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"out_problem.info.title",label:"题目名称","min-width":"200"}}),a("el-table-column",{attrs:{prop:"out_problem.info.tags",label:"标签","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.out_problem.info.tags,(function(e,r){return a("el-tag",{key:r,staticStyle:{"margin-right":"5px"}},[t._v(t._s(e))])}))}}])}),a("el-table-column",{attrs:{prop:"out_problem.info.difficulty",label:"难度",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.out_problem.info.difficulty<2.5?a("el-tag",{attrs:{effect:"dark",type:"info"}},[t._v("Navie ")]):e.row.out_problem.info.difficulty<5?a("el-tag",{attrs:{effect:"dark",type:"success"}},[t._v("Easy ")]):e.row.out_problem.info.difficulty<7.5?a("el-tag",{attrs:{effect:"dark",type:"warning"}},[t._v("Middle ")]):a("el-tag",{attrs:{effect:"dark",type:"danger"}},[t._v("Hard ")])]}}])}),a("el-table-column",{attrs:{prop:"submit_times",label:"提交次数",width:"150"}}),a("el-table-column",{attrs:{prop:"accept_times",label:"通过率",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:t.passingRateCalculate(e.row),color:"#1db7b5"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return a.stopPropagation(),t.goDeleteProblem(e.row.inner_id,e.row.out_problem.info.title)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticClass:"table_pagination",attrs:{background:"","hide-on-single-page":"","page-size":t.pageSize,"current-page":t.currentPage,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.getProblemList}})],1),a("addProblemDialog",{attrs:{region:t.region,addProblemDialogVisible:t.addProblemDialogVisible,closeDialog:t.closeAddProblemDialog}})],1)},s=[],i=(a("b680"),a("7c00")),n=a("7ea1"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"添加题目",visible:t.addProblemDialogVisible,width:"63%"},on:{close:t.closeDialog}},[a("ProblemSearchBar",{attrs:{searchProblemList:t.searchProblemList}}),a("el-table",{attrs:{data:t.problemList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"70"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{prop:"info.title",label:"题目"}}),a("el-table-column",{attrs:{prop:"info.tags",label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.info.tags,(function(e,r){return a("el-tag",{key:r,staticStyle:{"margin-right":"5px"}},[t._v(t._s(e))])}))}}])}),a("el-table-column",{attrs:{prop:"info.difficulty",label:"难度",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.info.difficulty<2.5?a("el-tag",{attrs:{effect:"dark",type:"info"}},[t._v("Navie ")]):e.row.info.difficulty<5?a("el-tag",{attrs:{effect:"dark",type:"success"}},[t._v("Easy ")]):e.row.info.difficulty<7.5?a("el-tag",{attrs:{effect:"dark",type:"warning"}},[t._v("Middle ")]):a("el-tag",{attrs:{effect:"dark",type:"danger"}},[t._v("Hard ")])]}}])})],1),a("el-pagination",{staticClass:"table_pagination",attrs:{background:"","hide-on-single-page":"","page-size":t.pageSize,"current-page":t.currentPage,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.getProblemList}}),a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"flex-end"}},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.addProblemRequest()}}},[t._v("添加")])],1)],1)},o=[],c=(a("d81d"),{props:{region:{type:String,default:""},addProblemDialogVisible:{type:Boolean,default:!1},closeDialog:{type:Function}},components:{ProblemSearchBar:n["a"]},data:function(){return{title_filter:"",tag_filter:[],difficulty_filter:"",problemList:[],currentPage:1,pageSize:5,total:null,multipleSelection:[],problem_ids:[]}},created:function(){this.getProblemList()},methods:{getProblemList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a={inner_id_order:!0,title_filter:this.title_filter,tag_filter:this.tag_filter,difficulty_filter:this.difficulty_filter,limit:this.pageSize,offset:this.pageSize*(t-1)};Object(i["i"])(a).then((function(a){e.currentPage=t,e.problemList=a.list,e.total=a.total}))["catch"]((function(t){}))},searchProblemList:function(t,e,a){this.title_filter=t,this.tag_filter=e,this.difficulty_filter=a,this.getProblemList()},handleSelectionChange:function(t){this.multipleSelection=t,this.problem_ids=t.map((function(t){return t.id}))},addProblemRequest:function(){var t=this,e={problem_ids:this.problem_ids};Object(i["a"])(this.region,e).then((function(){t.$message({message:"添加题目成功",type:"success"}),t.closeDialog()}))["catch"]((function(){t.$message({message:"添加题目失败",type:"warning"})}))}}}),u=c,f=a("2877"),p=Object(f["a"])(u,l,o,!1,null,null,null),d=p.exports,m=a("9c40"),_={components:{ProblemSearchBar:n["a"],AddProblemDialog:d},props:{region:{type:String,default:""}},data:function(){return{problemList:[],title_filter:"",tag_filter:[],difficulty_filter:"",currentPage:1,pageSize:8,total:null,addProblemDialogVisible:!1}},created:function(){this.getProblemList()},methods:{getProblemList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a={inner_id_order:!0,title_filter:this.title_filter,tag_filter:this.tag_filter,difficulty_filter:this.difficulty_filter,limit:this.pageSize,offset:this.pageSize*(t-1)};Object(i["h"])(this.region,a).then((function(a){e.currentPage=t,e.problemList=a.list,e.total=a.total}))["catch"]((function(t){}))},searchProblemList:function(t,e,a){this.title_filter=t,this.tag_filter=e,this.difficulty_filter=a,this.getProblemList()},passingRateCalculate:m["f"],jumpToProblemDetail:function(t){var e=this.$router.resolve({name:"problemDetail",params:{id:t.out_problem.id}});window.open(e.href,"_blank")},goDeleteProblem:function(t,e){var a=this;this.$confirm("此操作将删除题目 【"+e+"】，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["c"])(a.region,t).then((function(){a.getProblemList(a.currentPage),a.$message({message:"删除题目成功",type:"success"})}))["catch"]((function(){a.$message({message:"删除题目失败",type:"warning"})}))}))["catch"]((function(){a.$message({type:"info",message:"已取消删除"})}))},passingRateFormtype:function(t,e,a){return 0==t.submit_times?"0.00%":(t.accept_times/t.submit_times*100).toFixed(2)+"%"},closeAddProblemDialog:function(){this.addProblemDialogVisible=!1,this.getProblemList(this.currentPage)}}},b=_,g=Object(f["a"])(b,r,s,!1,null,null,null);e["a"]=g.exports},6439:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("竞赛管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/contestManage/list"}}},[t._v("竞赛列表")]),a("el-breadcrumb-item",[t._v(t._s(t.$route.params.region))])],1),a("ProblemList",{attrs:{region:t.$route.params.region}})],1)},s=[],i=a("4d40"),n={components:{ProblemList:i["a"]}},l=n,o=a("2877"),c=Object(o["a"])(l,r,s,!1,null,null,null);e["default"]=c.exports},"65f0":function(t,e,a){var r=a("861d"),s=a("e8b5"),i=a("b622"),n=i("species");t.exports=function(t,e){var a;return s(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?r(a)&&(a=a[n],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"662d":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return o}));var r=a("d354");function s(t){return Object(r["c"])("/problem_tags",t)}function i(t){return Object(r["a"])("/problem_tags/".concat(t))}function n(t,e){return Object(r["d"])("/problem_tags/".concat(t),e)}function l(){return Object(r["b"])("/problem_tags")}function o(){return Object(r["b"])("/problem_tags/apply_changes")}},"7c00":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return n})),a.d(e,"k",(function(){return l})),a.d(e,"j",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"a",(function(){return f})),a.d(e,"c",(function(){return p})),a.d(e,"h",(function(){return d})),a.d(e,"f",(function(){return m}));a("99af");var r=a("d354");function s(t){return Object(r["c"])("/problems",t)}function i(t){return Object(r["a"])("/problems/".concat(t))}function n(t,e){return Object(r["d"])("/problems/".concat(t),e)}function l(t){return Object(r["b"])("problems/".concat(t,"/title"))}function o(t,e,a,s){return Object(r["b"])("/regions/".concat(t,"/").concat(e,"/test_case/").concat(a,"?input=").concat(s))}function c(t){return Object(r["b"])("/problems",t)}function u(t){return Object(r["b"])("/problems/".concat(t))}function f(t,e){return Object(r["c"])("/regions/".concat(t),e)}function p(t,e){return Object(r["a"])("/regions/".concat(t,"/").concat(e))}function d(t,e){return Object(r["b"])("/regions/".concat(t),e)}function m(t,e){return Object(r["b"])("/regions/".concat(t,"/").concat(e))}},"7ea1":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:15}},[a("el-col",{attrs:{span:4.5}},[a("el-select",{attrs:{multiple:"",placeholder:"筛选标签(多选)"},model:{value:t.tag_filter,callback:function(e){t.tag_filter=e},expression:"tag_filter"}},t._l(t.tagOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-col",{attrs:{span:4.5}},[a("el-select",{attrs:{clearable:"",placeholder:"筛选难度"},model:{value:t.difficulty_filter,callback:function(e){t.difficulty_filter=e},expression:"difficulty_filter"}},t._l(t.difficultyOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),a("el-col",{attrs:{span:9}},[a("el-input",{attrs:{placeholder:"请输入想要搜索的题目名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchProblemList(t.title_filter,t.tag_filter,t.difficulty_filter)}},model:{value:t.title_filter,callback:function(e){t.title_filter=e},expression:"title_filter"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.searchProblemList(t.title_filter,t.tag_filter,t.difficulty_filter)}},slot:"append"})],1)],1)],1)},s=[],i=a("662d"),n={props:{searchProblemList:{type:Function}},data:function(){return{tagOptions:[],difficultyOptions:["Navie","Easy","Middle","Hard"],title_filter:"",tag_filter:[],difficulty_filter:""}},created:function(){this.getTagList()},methods:{getTagList:function(){var t=this;Object(i["e"])().then((function(e){t.tagOptions=e.list}))["catch"]((function(t){}))}}},l=n,o=a("2877"),c=Object(o["a"])(l,r,s,!1,null,null,null);e["a"]=c.exports},8418:function(t,e,a){"use strict";var r=a("c04e"),s=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var n=r(e);n in t?s.f(t,n,i(0,a)):t[n]=a}},"99af":function(t,e,a){"use strict";var r=a("23e7"),s=a("d039"),i=a("e8b5"),n=a("861d"),l=a("7b0b"),o=a("50c4"),c=a("8418"),u=a("65f0"),f=a("1dde"),p=a("b622"),d=a("2d00"),m=p("isConcatSpreadable"),_=9007199254740991,b="Maximum allowed index exceeded",g=d>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),h=f("concat"),v=function(t){if(!n(t))return!1;var e=t[m];return void 0!==e?!!e:i(t)},w=!g||!h;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,r,s,i,n=l(this),f=u(n,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?n:arguments[e],v(i)){if(s=o(i.length),p+s>_)throw TypeError(b);for(a=0;a<s;a++,p++)a in i&&c(f,p,i[a])}else{if(p>=_)throw TypeError(b);c(f,p++,i)}return f.length=p,f}})},a93b:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return n})),a.d(e,"h",(function(){return l})),a.d(e,"f",(function(){return o})),a.d(e,"j",(function(){return c})),a.d(e,"k",(function(){return u})),a.d(e,"i",(function(){return f})),a.d(e,"a",(function(){return p})),a.d(e,"c",(function(){return d})),a.d(e,"g",(function(){return m}));a("99af");var r=a("d354");function s(t){return Object(r["c"])("/contests",t)}function i(t){return Object(r["a"])("/contests/".concat(t))}function n(t,e){return Object(r["d"])("/contests/".concat(t),e)}function l(t){return Object(r["b"])("/contests",t)}function o(t){return Object(r["b"])("/contests/".concat(t))}function c(t){return Object(r["b"])("/contests/".concat(t,"/rank_acm"))}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["c"])("/contests/".concat(t,"/register"),e)}function f(t,e){return Object(r["b"])("/regions/".concat(t),e)}function p(t,e){return Object(r["c"])("/contests/".concat(t,"/group"),e)}function d(t,e){return Object(r["a"])("/contests/".concat(t,"/group/").concat(e))}function m(t){return Object(r["b"])("/contests/".concat(t,"/group"))}},b727:function(t,e,a){var r=a("0366"),s=a("44ad"),i=a("7b0b"),n=a("50c4"),l=a("65f0"),o=[].push,c=function(t){var e=1==t,a=2==t,c=3==t,u=4==t,f=6==t,p=7==t,d=5==t||f;return function(m,_,b,g){for(var h,v,w=i(m),y=s(w),C=r(_,b,3),k=n(y.length),x=0,O=g||l,P=e?O(m,k):a||p?O(m,0):void 0;k>x;x++)if((d||x in y)&&(h=y[x],v=C(h,x,w),t))if(e)P[x]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return x;case 2:o.call(P,h)}else switch(t){case 4:return!1;case 7:o.call(P,h)}return f?-1:c||u?u:P}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},d81d:function(t,e,a){"use strict";var r=a("23e7"),s=a("b727").map,i=a("1dde"),n=a("ae40"),l=i("map"),o=n("map");r({target:"Array",proto:!0,forced:!l||!o},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var r=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},eef4:function(t,e,a){t.exports=a.p+"static/img/required_field.dd6993b2.svg"},ff80:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("竞赛管理")]),r("el-breadcrumb-item",[t._v("竞赛列表")])],1),r("el-card",[r("el-input",{staticClass:"singleSearchBar",attrs:{placeholder:"请输入想要搜索的竞赛名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getContestList()}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getContestList()}},slot:"append"})],1),r("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:t.contestlist},on:{"row-click":t.handleClickProblem}},[r("el-table-column",{attrs:{prop:"region",label:"域"}}),r("el-table-column",{attrs:{prop:"title",label:"竞赛名称"}}),r("el-table-column",{attrs:{prop:"start_time",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return null!==e.row.start_time?[t._v(" "+t._s(t.formatTime(e.row.start_time))+" ")]:void 0}}],null,!0)}),r("el-table-column",{attrs:{prop:"end_time",label:"结束时间"},scopedSlots:t._u([{key:"default",fn:function(e){return null!==e.row.end_time?[t._v(" "+t._s(t.formatTime(e.row.end_time))+" ")]:void 0}}],null,!0)}),r("el-table-column",{attrs:{label:"操作",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return a.stopPropagation(),t.showEditDialog(e.$index)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return a.stopPropagation(),t.deleteContest(e.row.region,e.row.title)}}},[t._v("删除")]),"group_contest"===e.row.self_type?r("el-button",{attrs:{size:"small"},on:{click:function(a){return a.stopPropagation(),t.showLinkGroups(e.row.region)}}},[t._v("查看小组")]):t._e()]}}])})],1),r("el-pagination",{staticClass:"table_pagination",attrs:{background:"","hide-on-single-page":"","page-size":t.pageSize,"current-page":t.currentPage,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.getContestList}})],1),r("el-dialog",{attrs:{title:"修改竞赛",visible:t.editContestDialogVisible,width:"75%"},on:{"update:visible":function(e){t.editContestDialogVisible=e}}},[r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("竞赛域名")])]),r("el-input",{staticClass:"create-form-value-wrap",attrs:{disabled:""},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}})],1),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"create-form-label-wrap"},[r("span",{staticClass:"text"},[t._v("比赛结束后能否查看测试数据")])]),r("el-switch",{staticClass:"create-form-value-wrap",staticStyle:{"margin-top":"20px"},model:{value:t.can_view_testcases,callback:function(e){t.can_view_testcases=e},expression:"can_view_testcases"}})],1)],1),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("竞赛名称")])]),r("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入竞赛名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("el-switch",{model:{value:t.isUpdatePassword,callback:function(e){t.isUpdatePassword=e},expression:"isUpdatePassword"}}),r("span",{staticClass:"text",staticStyle:{"margin-left":"15px"}},[t._v("修改竞赛密码")])],1),r("el-input",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请输入竞赛密码",disabled:!t.isUpdatePassword},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("竞赛类型")])]),r("el-select",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛类型"},model:{value:t.contestType,callback:function(e){t.contestType=e},expression:"contestType"}},t._l(t.contestTypeOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("开始时间")])]),r("el-date-picker",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛开始时间","value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("结束时间")])]),r("el-date-picker",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛结束时间","value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-label-wrap"},[r("img",{staticClass:"required_img",attrs:{src:a("eef4")}}),r("span",{staticClass:"text"},[t._v("封榜时间")])]),r("el-date-picker",{staticClass:"create-form-value-wrap",attrs:{placeholder:"请选择竞赛封榜时间","value-format":"yyyy-MM-ddTHH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime"},model:{value:t.sealTime,callback:function(e){t.sealTime=e},expression:"sealTime"}})],1)],1),r("div",{staticClass:"create-form-row-wrap"},[r("div",{staticClass:"create-form-label-wrap"},[r("span",{staticClass:"text"},[t._v("竞赛说明")])]),r("div",{staticClass:"create-form-value-wrap"},[r("mavon-editor",{model:{value:t.introduction,callback:function(e){t.introduction=e},expression:"introduction"}})],1)]),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.view_before_start,callback:function(e){t.view_before_start=e},expression:"view_before_start"}}),r("span",{staticClass:"text"},[t._v("比赛开始前能查看题目")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.register_after_start,callback:function(e){t.register_after_start=e},expression:"register_after_start"}}),r("span",{staticClass:"text"},[t._v("比赛开始后能报名参加比赛")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.unrate_after_start,callback:function(e){t.unrate_after_start=e},expression:"unrate_after_start"}}),r("span",{staticClass:"text"},[t._v("比赛开始后报名能参与排名")])],1)])],1),r("el-row",{staticClass:"create-form-row-wrap",attrs:{gutter:30}},[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.view_after_end,callback:function(e){t.view_after_end=e},expression:"view_after_end"}}),r("span",{staticClass:"text"},[t._v("比赛结束后能查看题目")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.submit_after_end,callback:function(e){t.submit_after_end=e},expression:"submit_after_end"}}),r("span",{staticClass:"text"},[t._v("比赛结束后能提交")])],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"create-form-switch-item"},[r("el-switch",{model:{value:t.public_after_end,callback:function(e){t.public_after_end=e},expression:"public_after_end"}}),r("span",{staticClass:"text"},[t._v("比赛结束后题目公开")])],1)])],1),r("div",{staticClass:"create-form-button-wrap"},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editContest()}}},[t._v("修改竞赛")])],1)],1),r("LinkGroupsDialog",{attrs:{region:t.linkGroupsRegion,linkGroupsDialogVisible:t.linkGroupsDialogVisible,closeDialog:t.closeLinkGroupsDialog}})],1)},s=[],i=a("a93b"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"可参加该小组赛的小组名单",visible:t.linkGroupsDialogVisible,width:"40%"},on:{open:function(e){return t.getGroupList()},close:function(e){return t.closeGroupDialog()}}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.showAddGroupsDialog()}}},[t._v("添加小组")]),a("el-table",{attrs:{data:t.groupList}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"title",label:"小组标题"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteGroup(e.row.id,e.row.title)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加小组",visible:t.addLinkGroupsDialogVisible,width:"30%","append-to-body":""},on:{"update:visible":function(e){t.addLinkGroupsDialogVisible=e}}},[a("el-input",{staticStyle:{width:"400px","margin-bottom":"10px"},attrs:{size:"medium",placeholder:"请输入想要搜索的小组名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getAllGroupList()}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getAllGroupList()}},slot:"append"})],1),a("el-table",{attrs:{data:t.allGroupList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"title",label:"小组标题"}})],1),a("el-pagination",{staticClass:"table_pagination",attrs:{background:"","hide-on-single-page":"","page-size":t.pageSize,"current-page":t.currentPage,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.getAllGroupList}}),a("div",{staticClass:"buttonWrap"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addGroupRequest()}}},[t._v("添加")])],1)],1)],1)},l=[],o=(a("d81d"),a("4a26")),c={props:{region:{type:String,default:""},linkGroupsDialogVisible:{type:Boolean,default:!1},closeDialog:{type:Function}},data:function(){return{groupList:[],addLinkGroupsDialogVisible:!1,searchInput:"",allGroupList:[],currentPage:1,pageSize:5,total:null,multipleSelection:[],group_ids:[]}},methods:{getGroupList:function(){var t=this;Object(i["g"])(this.region).then((function(e){t.groupList=e}))["catch"]((function(t){}))},deleteGroup:function(t,e){var a=this;this.$confirm("此操作将从该小组赛名单中删除小组 【"+e+"】 , 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["c"])(a.region,t).then((function(){a.getGroupList(),a.$message.success("删除成功")}))["catch"]((function(){a.$message.warning("删除失败")}))}))["catch"]((function(){a.$message.info("已取消删除")}))},showAddGroupsDialog:function(){this.getAllGroupList(),this.addLinkGroupsDialogVisible=!0},getAllGroupList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={title_filter:this.searchInput,limit:this.pageSize,offset:this.pageSize*(e-1)};Object(o["g"])(a).then((function(a){t.currentPage=e,t.allGroupList=a.list,t.total=a.total}))["catch"]((function(t){}))},handleSelectionChange:function(t){this.multipleSelection=t,this.group_ids=t.map((function(t){return t.id}))},addGroupRequest:function(){var t=this,e={group_ids:this.group_ids};Object(i["a"])(this.region,e).then((function(){t.$message.success("添加小组成功"),t.addLinkGroupsDialogVisible=!1}))["catch"]((function(){t.$message.warning("添加小组失败")}))},closeGroupDialog:function(){this.closeDialog(),this.groupList=[]}}},u=c,f=a("2877"),p=Object(f["a"])(u,n,l,!1,null,null,null),d=p.exports,m=a("9c40"),_={components:{LinkGroupsDialog:d},data:function(){return{contestlist:[],searchInput:"",currentPage:1,pageSize:8,total:null,editContestDialogVisible:!1,region:"",title:"",introduction:"",contestType:"",startTime:"",endTime:"",sealTime:"",isUpdatePassword:!1,password:"",can_view_testcases:!1,register_after_start:!0,unrate_after_start:!0,view_before_start:!1,view_after_end:!0,public_after_end:!1,submit_after_end:!0,contestTypeOptions:[{label:"公开赛",value:"open_contest"},{label:"小组赛",value:"group_contest"}],linkGroupsRegion:"",linkGroupsDialogVisible:!1}},created:function(){this.getContestList()},methods:{getContestList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={title_filter:this.searchInput,limit:this.pageSize,offset:this.pageSize*(e-1)};Object(i["h"])(a).then((function(a){t.currentPage=e,t.contestlist=a.list,t.total=a.total}))["catch"]((function(){t.$message.warning("获取竞赛列表失败")}))},handleClickProblem:function(t){this.$router.push({name:"contestDetailList",params:{region:t.region}})},showEditDialog:function(t){var e=this.contestlist[t];this.region=e.region,this.title=e.title,this.introduction=e.introduction,this.contestType=e.self_type,this.startTime=e.start_time,this.endTime=e.end_time,this.sealTime=e.seal_time,this.password="",this.can_view_testcases=e.can_view_testcases,this.register_after_start=e.settings.register_after_start,this.unrate_after_start=e.settings.unrate_after_start,this.view_before_start=e.settings.view_before_start,this.view_after_end=e.settings.view_after_end,this.public_after_end=e.settings.public_after_end,this.submit_after_end=e.settings.submit_after_end,this.isUpdatePassword=!1,this.editContestDialogVisible=!0},editContest:function(){var t=this,e={new_title:this.title,new_introduction:this.introduction,new_password:this.password,new_self_type:this.contestType,new_start_time:this.startTime,new_end_time:this.endTime,new_seal_time:this.sealTime,new_can_view_testcases:this.can_view_testcases,new_settings:{register_after_start:this.register_after_start,unrate_after_start:this.unrate_after_start,view_before_start:this.view_before_start,view_after_end:this.view_after_end,public_after_end:this.public_after_end,submit_after_end:this.submit_after_end}};this.isUpdatePassword||delete e["new_password"],Object(i["e"])(this.region,e).then((function(){t.$message({message:"修改竞赛成功",type:"success"}),t.editContestDialogVisible=!1,t.getContestList()}))["catch"]((function(){t.$message({message:"修改竞赛失败",type:"warning"})}))},deleteContest:function(t,e){var a=this;this.$confirm("此操作将永久删除竞赛 【"+e+"】 , 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(t).then((function(){a.getContestList(a.currentPage),a.$message.success("删除成功")}))["catch"]((function(){a.$message.warning("删除失败")}))}))["catch"]((function(){a.$message.info("已取消删除")}))},showLinkGroups:function(t){this.linkGroupsRegion=t,this.linkGroupsDialogVisible=!0},closeLinkGroupsDialog:function(){this.linkGroupsDialogVisible=!1},formatTime:m["e"]}},b=_,g=Object(f["a"])(b,r,s,!1,null,null,null);e["default"]=g.exports}}]);